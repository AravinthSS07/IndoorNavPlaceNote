CLOUDCODE: 

//load map

var API = Spark.getGameDataService();
var name = Spark.getData().NAME;

var entry = API.getItem("MAPS", name);
var data = entry.document().getData();

Spark.setScriptData("PLACENOTE_ID",data.placenote_id); 

// save map

var API = Spark.getGameDataService();
var name = Spark.getData().NAME;
var id = Spark.getData().PLACENOTE_ID;

var currentMap = {
    "name": name,
    "placenote_id": id,
};

var entry = API.createItem("MAPS", name);
var data = entry.getData();

data.placenote_id = id;

//Persist and return any errors
var status = entry.persistor().persist().error();

if(status){
    Spark.setScriptError("ERROR", status);
}

